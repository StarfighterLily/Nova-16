// More comprehensive test
int8 complex_calc(int8 x, int8 y, int8 z) {
    return x + y * z;
}

void main() {
    int8 data1 = 10;
    int8 data2 = 20;
    int8 data3 = 30;
    
    // Nested loops with function calls to stress test our fixes
    for (int8 i = 0; i < 2; i++) {
        for (int8 j = 0; j < 2; j++) {
            int8 result = complex_calc(data1 + i, data2 + j, data3);
            data1 = result;  // Should not corrupt loop counters i, j
        }
    }
    
    halt();
}
