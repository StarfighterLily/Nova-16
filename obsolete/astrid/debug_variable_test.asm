; Generated by Astrid Pure Stack-Centric Compiler
; Architecture: Nova-16 with pure stack-first approach
; Variables stored on stack, minimal register usage
; Stack Layout: [locals][FP][return_addr][params]

main:
    MOV SP, 0xF000                ; Initialize stack pointer to safe area
    MOV FP, SP                    ; Initialize frame pointer for main
    SUB SP, 18      ; Allocate 18 bytes for locals
    MOV P1, 25         ; Load constant 25
    MOV [FP-4], P1      ; Direct indexed access
    MOV P2, [FP-4]             ; Load from v0 (16-bit)
    MOV [FP-6], P2      ; Direct indexed access
    MOV P1, 50         ; Load constant 50
    MOV [FP-8], P1      ; Direct indexed access
    MOV P2, [FP-8]             ; Load from v2 (16-bit)
    MOV [FP-10], P2      ; Direct indexed access
    MOV P1, 1         ; Load constant 1
    MOV [FP-12], P1      ; Direct indexed access
    MOV VL, 1         ; Set active layer
    MOV [FP-14], R0      ; Direct indexed access
    MOV P1, 31         ; Load constant 31
    MOV [FP-16], P1      ; Direct indexed access
    MOV R0, [FP-6]              ; Load X from v1
    MOV VX, R0                    ; Set X coordinate
    MOV R0, [FP-10]              ; Load Y from v3
    MOV VY, R0                    ; Set Y coordinate
    MOV R0, 31         ; Load color constant
    MOV VM, 0                     ; Set coordinate mode
    SWRITE R0                     ; Write pixel
    MOV [FP-18], R0      ; Direct indexed access
    ; Halt processor
    MOV SP, FP                    ; Restore stack pointer
    HLT                           ; Halt system
