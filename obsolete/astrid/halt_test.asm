; Generated by Astrid Pure Stack-Centric Compiler
; Architecture: Nova-16 with pure stack-first approach
; Variables stored on stack, minimal register usage
; Stack Layout: [locals][FP][return_addr][params]

main:
    MOV SP, 0xF000                ; Initialize stack pointer to safe area
    MOV FP, SP                    ; Initialize frame pointer for main
    SUB SP, 10      ; Allocate 10 bytes for locals
    MOV P0, FP                ; Load base pointer
    SUB P0, 4              ; Subtract for negative offset (-4)
    MOV R0, 1         ; Load constant 1
    MOV [P0], R0                  ; Store to local variable v0
    MOV VL, 1         ; Set active layer
    MOV P0, FP                ; Load base pointer
    SUB P0, 6              ; Subtract for negative offset (-6)
    MOV [P0], R0                  ; Store return value to v1
    MOV P0, FP                ; Load base pointer
    SUB P0, 8              ; Subtract for negative offset (-8)
    MOV R0, 10         ; Load constant 10
    MOV [P0], R0                  ; Store to local variable v2
    MOV VX, 10             ; Set X coordinate
    MOV VY, 10             ; Set Y coordinate
    MOV R0, 1         ; Load color constant
    MOV VM, 0                     ; Set coordinate mode
    SWRITE R0                     ; Write pixel
    MOV P0, FP                ; Load base pointer
    SUB P0, 10              ; Subtract for negative offset (-10)
    MOV [P0], R0                  ; Store return value to v3
    ; Halt processor
    MOV SP, FP                    ; Restore stack pointer
    HLT                           ; Halt system
